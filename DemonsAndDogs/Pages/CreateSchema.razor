@page "/CreateSchema"
@using MediatR
@using Mediator.Mediator.Contracts
@using UIComponents
@inject IMediator Mediator
@inject NotificationService NotificationService

<PageTitle>Create Schema</PageTitle>

<SchemaBuilder OnSubmit="OnSubmit" />

@code {
    private async Task OnSubmit(SchemaBuilder.SchemaSubmission submission)
    {
        try
        {
            var result = await Mediator.Send(new CreateSchemaRequest(submission.OwnerId, string.Empty, submission.JsonContent));
            NotificationService.Notify(NotificationSeverity.Success, "Success", $"Schema created with ID: {result.Id}");
        }
        catch (Exception ex)
        {
            NotificationService.Notify(NotificationSeverity.Error, "Error", ex.Message);
        }
    }
}
