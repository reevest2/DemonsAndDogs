@page "/CreateSchema"
@using System.Text.Json
@using System.Linq

<RadzenCard Style="padding:20px">
    <ChildContent>
        <RadzenHeading Size="H4">JSON Schema Builder</RadzenHeading>
        <RadzenFieldset Text="Schema Details" Style="margin-top:20px">
            <RadzenTemplateForm Data="@schemaModel" TItem="SchemaModel">
                <RadzenStack Spacing="20px">
                    <RadzenTextBox Name="Title" Placeholder="Schema Title" Style="width:100%" @bind-Value="schemaModel.Title" />
                    <RadzenTextArea Name="Description" Placeholder="Description" Style="width:100%" @bind-Value="schemaModel.Description" />
                    <RadzenDropDown Data="@schemaTypes" @bind-Value="schemaModel.Type" Style="width:200px" />
                </RadzenStack>
                <RadzenButton Text="Generate Schema" Icon="save" Style="margin-top:10px" Click="@GenerateSchema" ButtonStyle="ButtonStyle.Primary" />
            </RadzenTemplateForm>
        </RadzenFieldset>
        <RadzenFieldset Text="Properties" Style="margin-top:20px">
            <RadzenRow>
                <RadzenColumn Width="6">
                    <RadzenDataGrid @ref="grid" Data="@properties" TItem="SchemaProperty" AllowPaging="false" AllowSorting="false" AllowFiltering="false" Style="height:300px">
                        <Columns>
                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Name" Title="Name" />
                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Type" Title="Type" />
                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Required" Title="Required">
                                <Template Context="prop">@((prop.Required) ? "Yes" : "No")</Template>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Section" Title="Section" />
                            <RadzenDataGridColumn TItem="SchemaProperty" Title="Actions">
                                <Template Context="prop">
                                    <RadzenButton Icon="edit" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Secondary" Style="margin-right:5px" Click="@(() => EditProperty(prop))" />
                                    <RadzenButton Icon="delete" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Danger" Click="@(() => DeleteProperty(prop))" />
                                </Template>
                            </RadzenDataGridColumn>
                        </Columns>
                    </RadzenDataGrid>
                    <RadzenButton Icon="add_circle" Text="Add Property" Style="margin-top:10px" Click="@AddProperty" />
                </RadzenColumn>
                <RadzenColumn Width="6">
                    @if (propertyEditorVisible)
                    {
                        <RadzenTemplateForm  Data="@currentProperty" TItem="SchemaProperty" Submit="@SaveProperty">
                            <RadzenStack Spacing="10px">
                                <RadzenTextBox Name="PropName" Placeholder="Property Name" Style="width:100%" @bind-Value="currentProperty.Name" />
                                <RadzenDropDown Name="PropType" Data="@propertyTypes" Style="width:100%" @bind-Value="currentProperty.Type" />
                                <RadzenCheckBox Name="PropRequired" @bind-Value="currentProperty.Required" TValue="bool" />
                                <RadzenLabel Text="Required" Style="margin-left:5px;vertical-align:middle" />
                                <RadzenTextBox Name="PropFormat" Placeholder="Format" Style="width:100%" @bind-Value="currentProperty.Format" />
                                <RadzenTextBox Name="PropDescription" Placeholder="Description" Style="width:100%" @bind-Value="currentProperty.Description" />
                                <RadzenAutoComplete Name="PropSection" Data="@sections" Placeholder="Section" Style="width:100%" @bind-Value="currentProperty.Section" />
                                @if (currentProperty.Type == "array")
                                {
                                    <RadzenDropDown Name="PropArrayRef" Data="@arrayDefinitions.Select(d => d.Name)" Style="width:100%" @bind-Value="currentProperty.ArrayDefinitionName" Placeholder="Select array definition" />
                                    <RadzenButton Icon="add_circle" Text="Add Array Definition" Style="margin-top:5px" ButtonStyle="ButtonStyle.Secondary" Click="@AddArrayDefinition" />
                                }
                                else
                                {
                                    <RadzenTextBox Name="EnumValues" Placeholder="Enum values (comma separated)" Style="width:100%" @bind-Value="enumString" />
                                }
                                <RadzenButton Text="Save Property" Icon="check" ButtonStyle="ButtonStyle.Primary" Type="Submit" />
                                <RadzenButton Text="Cancel" Icon="cancel" ButtonStyle="ButtonStyle.Secondary" Click="@CancelPropertyEdit" Style="margin-left:5px" />
                            </RadzenStack>
                        </RadzenTemplateForm>
                    }
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <!-- Array Definitions section: allows the user to define reusable array schemas that can be referenced by properties of type "array" -->
        <RadzenFieldset Text="Array Definitions" Style="margin-top:20px">
            <RadzenRow>
                <RadzenColumn Width="6">
                    <RadzenDataGrid Data="@arrayDefinitions" TItem="ArrayDefinition" AllowPaging="false" AllowSorting="false" AllowFiltering="false" Style="height:300px">
                        <Columns>
                            <RadzenDataGridColumn TItem="ArrayDefinition" Property="Name" Title="Name" />
                            <RadzenDataGridColumn TItem="ArrayDefinition" Property="ItemType" Title="Item Type" />
                            <RadzenDataGridColumn TItem="ArrayDefinition" Title="Actions">
                                <Template Context="arr">
                                    <RadzenButton Icon="edit" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Secondary" Style="margin-right:5px" Click="@(() => EditArrayDefinition(arr))" />
                                    <RadzenButton Icon="delete" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Danger" Click="@(() => DeleteArrayDefinition(arr))" />
                                </Template>
                            </RadzenDataGridColumn>
                        </Columns>
                    </RadzenDataGrid>
                    <RadzenButton Icon="add_circle" Text="Add Array" Style="margin-top:10px" Click="@AddArrayDefinition" />
                </RadzenColumn>
                <RadzenColumn Width="6">
                    @if (arrayEditorVisible)
                    {
                        <RadzenTemplateForm Data="@currentArrayDef" TItem="ArrayDefinition" Submit="@SaveArrayDefinition">
                            <RadzenStack Spacing="10px">
                                <RadzenTextBox Placeholder="Array Name" Style="width:100%" @bind-Value="currentArrayDef.Name" />
                                <RadzenTextArea Placeholder="Description" Style="width:100%" @bind-Value="currentArrayDef.Description" />
                                <RadzenDropDown Data="@propertyTypes" Style="width:100%" @bind-Value="currentArrayDef.ItemType" />
                                @if (currentArrayDef.ItemType == "object")
                                {
                                    <RadzenDataGrid Data="@currentArrayDef.ItemProperties" TItem="SchemaProperty" AllowPaging="false" AllowSorting="false" AllowFiltering="false" Style="height:200px">
                                        <Columns>
                                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Name" Title="Name" />
                                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Type" Title="Type" />
                                            <RadzenDataGridColumn TItem="SchemaProperty" Property="Required" Title="Required">
                                                <Template Context="ip">@((ip.Required) ? "Yes" : "No")</Template>
                                            </RadzenDataGridColumn>
                                            <RadzenDataGridColumn TItem="SchemaProperty" Title="Actions">
                                                <Template Context="ip">
                                                    <RadzenButton Icon="edit" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Secondary" Style="margin-right:5px" Click="@(() => EditItemProperty(ip))" />
                                                    <RadzenButton Icon="delete" Size="ButtonSize.Small" ButtonStyle="ButtonStyle.Danger" Click="@(() => DeleteItemProperty(ip))" />
                                                </Template>
                                            </RadzenDataGridColumn>
                                        </Columns>
                                    </RadzenDataGrid>
                                    <RadzenButton Icon="add_circle" Text="Add Item Property" Style="margin-top:10px" Click="@AddItemProperty" />
                                    @if (itemPropertyEditorVisible)
                                    {
                                        <RadzenTemplateForm Data="@currentItemProperty" TItem="SchemaProperty" Submit="@SaveItemProperty">
                                            <RadzenStack Spacing="10px">
                                                <RadzenTextBox Placeholder="Property Name" Style="width:100%" @bind-Value="currentItemProperty.Name" />
                                                <RadzenDropDown Data="@propertyTypes" Style="width:100%" @bind-Value="currentItemProperty.Type" />
                                                <RadzenCheckBox @bind-Value="currentItemProperty.Required" TValue="bool" />
                                                <RadzenLabel Text="Required" Style="margin-left:5px;vertical-align:middle" />
                                                <RadzenTextBox Placeholder="Format" Style="width:100%" @bind-Value="currentItemProperty.Format" />
                                                <RadzenTextBox Placeholder="Description" Style="width:100%" @bind-Value="currentItemProperty.Description" />
                                                <RadzenTextBox Placeholder="Enum values (comma separated)" Style="width:100%" @bind-Value="itemEnumString" />
                                                <RadzenButton Text="Save Item" Icon="check" ButtonStyle="ButtonStyle.Primary" Type="Submit" />
                                                <RadzenButton Text="Cancel" Icon="cancel" ButtonStyle="ButtonStyle.Secondary" Click="@CancelItemPropertyEdit" Style="margin-left:5px" />
                                            </RadzenStack>
                                        </RadzenTemplateForm>
                                    }
                                }
                                else
                                {
                                    <RadzenTextBox Placeholder="Item Format" Style="width:100%" @bind-Value="currentArrayDef.ItemFormat" />
                                    <RadzenTextBox Placeholder="Item Enum values (comma separated)" Style="width:100%" @bind-Value="arrayItemEnumString" />
                                }
                                <RadzenButton Text="Save Array" Icon="check" ButtonStyle="ButtonStyle.Primary" Type="Submit" />
                                <RadzenButton Text="Cancel" Icon="cancel" ButtonStyle="ButtonStyle.Secondary" Click="@CancelArrayDefinitionEdit" Style="margin-left:5px" />
                            </RadzenStack>
                        </RadzenTemplateForm>
                    }
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <RadzenFieldset Text="JSON Schema Preview" Style="margin-top:20px">
            <RadzenTextArea Value="@jsonSchemaText" ReadOnly="true" Style="width:100%;height:300px" />
        </RadzenFieldset>
    </ChildContent>
</RadzenCard>

@code {
    RadzenDataGrid<SchemaProperty> grid;
    SchemaModel schemaModel = new();
    List<SchemaProperty> properties = new();
    SchemaProperty currentProperty = new();
    bool propertyEditorVisible;
    string enumString;
    string jsonSchemaText;
    List<string> schemaTypes = new() { "object", "array" };
    List<string> propertyTypes = new() { "string", "number", "integer", "boolean", "array", "object" };
    List<string> sections = new();

    // List of reusable array definitions. Each definition describes an array's item schema and can be referenced
    // by properties of type "array" using the ArrayDefinitionName field. This allows schemas to be
    // generated consistently when arrays are reused across different objects.
    List<ArrayDefinition> arrayDefinitions = new();
    ArrayDefinition currentArrayDef = new();
    bool arrayEditorVisible;
    // Holds enumeration values for arrays of primitive types (comma separated string)
    string arrayItemEnumString;
    // Item property editor state used when editing arrays of objects
    SchemaProperty currentItemProperty = new();
    bool itemPropertyEditorVisible;
    string itemEnumString;

    void AddProperty()
    {
        currentProperty = new SchemaProperty
        {
            ArrayDefinitionName = null
        };
        enumString = string.Empty;
        propertyEditorVisible = true;
    }

    void EditProperty(SchemaProperty prop)
    {
        currentProperty = new SchemaProperty
        {
            Name = prop.Name,
            Type = prop.Type,
            Required = prop.Required,
            Description = prop.Description,
            Format = prop.Format,
            EnumValues = prop.EnumValues != null ? new List<string>(prop.EnumValues) : new List<string>(),
            Section = prop.Section,
            ArrayDefinitionName = prop.ArrayDefinitionName
        };
        enumString = currentProperty.EnumValues != null && currentProperty.EnumValues.Count > 0 ? string.Join(", ", currentProperty.EnumValues) : string.Empty;
        propertyEditorVisible = true;
        properties.Remove(prop);
    }

    void DeleteProperty(SchemaProperty prop)
    {
        properties.Remove(prop);
        GenerateSchema();
    }

    void SaveProperty(SchemaProperty args)
    {
        // Only parse enum values for non-array properties. Arrays reference definitions and should not
        // have enums directly on the property itself.
        if (args.Type != "array" && !string.IsNullOrWhiteSpace(enumString))
        {
            args.EnumValues = enumString.Split(',', StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()).ToList();
        }
        properties.Add(args);
        if (!string.IsNullOrWhiteSpace(args.Section) && !sections.Contains(args.Section))
        {
            sections.Add(args.Section);
        }
        propertyEditorVisible = false;
        GenerateSchema();
        grid?.Reload();
    }

    void CancelPropertyEdit()
    {
        propertyEditorVisible = false;
    }

    // Array definition management functions
    void AddArrayDefinition()
    {
        currentArrayDef = new ArrayDefinition
        {
            ItemType = "string",
            ItemProperties = new List<SchemaProperty>()
        };
        arrayItemEnumString = string.Empty;
        itemPropertyEditorVisible = false;
        arrayEditorVisible = true;
    }

    void EditArrayDefinition(ArrayDefinition def)
    {
        // Create a copy of the definition so edits do not modify the original until saved
        currentArrayDef = new ArrayDefinition
        {
            Name = def.Name,
            Description = def.Description,
            ItemType = def.ItemType,
            ItemFormat = def.ItemFormat,
            ItemEnumValues = def.ItemEnumValues != null ? new List<string>(def.ItemEnumValues) : new List<string>(),
            ItemProperties = def.ItemProperties != null ? def.ItemProperties.Select(ip => new SchemaProperty
            {
                Name = ip.Name,
                Type = ip.Type,
                Required = ip.Required,
                Description = ip.Description,
                EnumValues = ip.EnumValues != null ? new List<string>(ip.EnumValues) : new List<string>(),
                Format = ip.Format,
                Section = ip.Section,
                ArrayDefinitionName = ip.ArrayDefinitionName
            }).ToList() : new List<SchemaProperty>()
        };
        arrayItemEnumString = currentArrayDef.ItemEnumValues != null && currentArrayDef.ItemEnumValues.Count > 0 ? string.Join(", ", currentArrayDef.ItemEnumValues) : string.Empty;
        itemPropertyEditorVisible = false;
        arrayEditorVisible = true;
        arrayDefinitions.Remove(def);
    }

    void DeleteArrayDefinition(ArrayDefinition def)
    {
        arrayDefinitions.Remove(def);
        GenerateSchema();
    }

    void SaveArrayDefinition(ArrayDefinition args)
    {
        // Parse enumeration for arrays of primitive types
        if (args.ItemType != "object" && !string.IsNullOrWhiteSpace(arrayItemEnumString))
        {
            args.ItemEnumValues = arrayItemEnumString.Split(',', StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()).ToList();
        }
        arrayDefinitions.Add(args);
        arrayEditorVisible = false;
        // After saving a definition, regenerate the schema since definitions may be referenced
        GenerateSchema();
    }

    void CancelArrayDefinitionEdit()
    {
        arrayEditorVisible = false;
    }

    // Item property management for arrays of objects
    void AddItemProperty()
    {
        currentItemProperty = new SchemaProperty
        {
            ArrayDefinitionName = null
        };
        itemEnumString = string.Empty;
        itemPropertyEditorVisible = true;
    }

    void EditItemProperty(SchemaProperty prop)
    {
        currentItemProperty = new SchemaProperty
        {
            Name = prop.Name,
            Type = prop.Type,
            Required = prop.Required,
            Description = prop.Description,
            EnumValues = prop.EnumValues != null ? new List<string>(prop.EnumValues) : new List<string>(),
            Format = prop.Format,
            Section = prop.Section,
            ArrayDefinitionName = prop.ArrayDefinitionName
        };
        itemEnumString = currentItemProperty.EnumValues != null && currentItemProperty.EnumValues.Count > 0 ? string.Join(", ", currentItemProperty.EnumValues) : string.Empty;
        currentArrayDef.ItemProperties.Remove(prop);
        itemPropertyEditorVisible = true;
    }

    void DeleteItemProperty(SchemaProperty prop)
    {
        currentArrayDef.ItemProperties.Remove(prop);
    }

    void SaveItemProperty(SchemaProperty args)
    {
        if (!string.IsNullOrWhiteSpace(itemEnumString))
        {
            args.EnumValues = itemEnumString.Split(',', StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()).ToList();
        }
        currentArrayDef.ItemProperties.Add(args);
        itemPropertyEditorVisible = false;
    }

    void CancelItemPropertyEdit()
    {
        itemPropertyEditorVisible = false;
    }

    // Generate the JSON Schema based on the current schema model, properties, and array definitions. When the root
    // type is "object" the schema will include a "properties" section; when the root type is "array" the schema
    // will include an "items" section describing an object whose properties come from the property list. Array
    // definitions are placed in the "$defs" section and referenced via "$ref" for properties of type "array".
    void GenerateSchema()
    {
        var schema = new Dictionary<string, object>();
        // Include title and description if provided
        if (!string.IsNullOrWhiteSpace(schemaModel.Title))
        {
            schema["title"] = schemaModel.Title;
        }
        if (!string.IsNullOrWhiteSpace(schemaModel.Description))
        {
            schema["description"] = schemaModel.Description;
        }
        // Set the root type
        schema["type"] = schemaModel.Type;

        // Build reusable array definitions in the $defs section. Definitions allow arrays to be
        // referenced by properties via $ref, ensuring consistent array schemas across objects.
        var defs = new Dictionary<string, object>();
        foreach (var arr in arrayDefinitions)
        {
            var defSchema = new Dictionary<string, object>();
            defSchema["type"] = "array";
            // Build the items schema depending on the item type
            var itemSchema = new Dictionary<string, object>();
            if (arr.ItemType == "object")
            {
                itemSchema["type"] = "object";
                var itemProps = new Dictionary<string, object>();
                var itemRequired = new List<string>();
                foreach (var ip in arr.ItemProperties)
                {
                    var ipSchema = new Dictionary<string, object>();
                    ipSchema["type"] = ip.Type;
                    if (!string.IsNullOrWhiteSpace(ip.Description))
                    {
                        ipSchema["description"] = ip.Description;
                    }
                    if (ip.EnumValues != null && ip.EnumValues.Count > 0)
                    {
                        ipSchema["enum"] = ip.EnumValues;
                    }
                    if (!string.IsNullOrWhiteSpace(ip.Format))
                    {
                        ipSchema["format"] = ip.Format;
                    }
                    if (!string.IsNullOrWhiteSpace(ip.Section))
                    {
                        ipSchema["x-section"] = ip.Section;
                    }
                    itemProps[ip.Name] = ipSchema;
                    if (ip.Required)
                    {
                        itemRequired.Add(ip.Name);
                    }
                }
                itemSchema["properties"] = itemProps;
                if (itemRequired.Count > 0)
                {
                    itemSchema["required"] = itemRequired;
                }
            }
            else
            {
                itemSchema["type"] = arr.ItemType;
                if (!string.IsNullOrWhiteSpace(arr.ItemFormat))
                {
                    itemSchema["format"] = arr.ItemFormat;
                }
                if (arr.ItemEnumValues != null && arr.ItemEnumValues.Count > 0)
                {
                    itemSchema["enum"] = arr.ItemEnumValues;
                }
            }
            defSchema["items"] = itemSchema;
            defs[arr.Name] = defSchema;
        }
        if (defs.Count > 0)
        {
            schema["$defs"] = defs;
        }

        if (schemaModel.Type == "array")
        {
            // For a root-level array, build an items schema using the current properties list.
            var itemSchema = new Dictionary<string, object>();
            itemSchema["type"] = "object";
            var propsObj = new Dictionary<string, object>();
            var requiredList = new List<string>();
            foreach (var p in properties)
            {
                var propSchema = new Dictionary<string, object>();
                if (p.Type == "array")
                {
                    // If an array property references a definition, use $ref in the item schema.
                    if (!string.IsNullOrWhiteSpace(p.ArrayDefinitionName) && defs.ContainsKey(p.ArrayDefinitionName))
                    {
                        propSchema["$ref"] = "#/$defs/" + p.ArrayDefinitionName;
                    }
                    else
                    {
                        // Fallback to untyped array if no definition selected
                        propSchema["type"] = "array";
                    }
                    if (!string.IsNullOrWhiteSpace(p.Description)) propSchema["description"] = p.Description;
                }
                else
                {
                    propSchema["type"] = p.Type;
                    if (!string.IsNullOrWhiteSpace(p.Description)) propSchema["description"] = p.Description;
                    if (p.EnumValues != null && p.EnumValues.Count > 0) propSchema["enum"] = p.EnumValues;
                    if (!string.IsNullOrWhiteSpace(p.Format)) propSchema["format"] = p.Format;
                }
                if (!string.IsNullOrWhiteSpace(p.Section)) propSchema["x-section"] = p.Section;
                propsObj[p.Name] = propSchema;
                if (p.Required) requiredList.Add(p.Name);
            }
            itemSchema["properties"] = propsObj;
            if (requiredList.Count > 0)
            {
                itemSchema["required"] = requiredList;
            }
            schema["items"] = itemSchema;
        }
        else
        {
            // Generate a normal object schema
            var propertiesObj = new Dictionary<string, object>();
            var requiredList = new List<string>();
            foreach (var p in properties)
            {
                var propSchema = new Dictionary<string, object>();
                if (p.Type == "array")
                {
                    // Use $ref to reference a definition for array properties
                    if (!string.IsNullOrWhiteSpace(p.ArrayDefinitionName) && defs.ContainsKey(p.ArrayDefinitionName))
                    {
                        propSchema["$ref"] = "#/$defs/" + p.ArrayDefinitionName;
                    }
                    else
                    {
                        // Fallback: treat as untyped array if no definition selected
                        propSchema["type"] = "array";
                    }
                    if (!string.IsNullOrWhiteSpace(p.Description)) propSchema["description"] = p.Description;
                }
                else
                {
                    propSchema["type"] = p.Type;
                    if (!string.IsNullOrWhiteSpace(p.Description)) propSchema["description"] = p.Description;
                    if (p.EnumValues != null && p.EnumValues.Count > 0) propSchema["enum"] = p.EnumValues;
                    if (!string.IsNullOrWhiteSpace(p.Format)) propSchema["format"] = p.Format;
                }
                if (!string.IsNullOrWhiteSpace(p.Section)) propSchema["x-section"] = p.Section;
                propertiesObj[p.Name] = propSchema;
                if (p.Required)
                {
                    requiredList.Add(p.Name);
                }
            }
            schema["properties"] = propertiesObj;
            if (requiredList.Count > 0)
            {
                schema["required"] = requiredList;
            }
        }
        // Serialize with indentation for readability
        jsonSchemaText = JsonSerializer.Serialize(schema, new JsonSerializerOptions { WriteIndented = true });
    }

    public class SchemaModel
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public string Type { get; set; } = "object";
    }

    public class SchemaProperty
    {
        public string Name { get; set; }
        public string Type { get; set; }
        public bool Required { get; set; }
        public string Description { get; set; }
        public List<string> EnumValues { get; set; }
        public string Format { get; set; }
        public string Section { get; set; }

        // When this property is of type "array", this optional field holds the name of the array definition
        // referenced via $ref. The definitions are defined in the ArrayDefinitions list. If not set, the
        // property will be treated as an untyped array in the generated schema.
        public string ArrayDefinitionName { get; set; }
    }

    // Represents a reusable definition for an array. Each array definition specifies a name and
    // describes the type of items it contains. Arrays of primitive types can include a format and
    // an enumeration. Arrays of objects can specify item properties and required fields. These
    // definitions are emitted into the "$defs" section of the generated schema and referenced
    // via $ref by properties of type "array".
    public class ArrayDefinition
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public string ItemType { get; set; }
        public string ItemFormat { get; set; }
        public List<string> ItemEnumValues { get; set; }
        public List<SchemaProperty> ItemProperties { get; set; } = new();
    }
}